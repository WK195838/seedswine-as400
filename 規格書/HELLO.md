# HELLO程序規格書

## 1. 基本信息

| 項目 | 內容 |
|------|------|
| 程序ID | HELLO |
| 程序名稱 | 訪問違規處理程序 |
| 所屬系統 | 西祺企業管理資訊系統 |
| 所屬子系統 | 系統安全管理 |
| 開發者 | A1062 JEANNY LIN |
| 創建日期 | 79/05/25 (民國79年5月25日) |
| 最後更新 | 無 |
| 程序語言 | CL (Control Language) |
| 程序位置 | QCLSRC_QLIBSS/HELLO.txt |

## 2. 程序概述

HELLO程序是西祺企業管理資訊系統中的一個安全相關程序，主要用於處理系統檢測到的訪問違規情況。當用戶嘗試訪問未授權的資源或執行未授權的操作時，系統會調用此程序，並向系統操作員發送警告消息，以便及時處理潛在的安全問題。

## 3. 系統架構

### 3.1 位置關係
HELLO程序位於系統安全管理子系統中，是整個安全框架的組成部分。它與其他安全相關程序（如S@S系列程序）協同工作，共同保障系統安全。

### 3.2 調用關係
- **被調用方式**：由系統安全監控模塊在檢測到訪問違規時調用
- **調用其他程序**：無
- **相關程序**：
  - 系統安全監控程序
  - 用戶權限管理程序（S@S系列）
  - 系統日誌記錄程序

### 3.3 運行環境
- **操作系統**：IBM AS/400
- **運行庫**：QLIBSS
- **所需資源**：系統消息隊列（QSYSOPR）

## 4. 程序流程

### 4.1 主要流程
1. 程序啟動，接收錯誤代碼參數
2. 構造包含錯誤代碼的警告消息
3. 將消息發送給系統操作員
4. 程序結束

### 4.2 流程圖
```
開始
  ↓
接收錯誤代碼參數(&HELLO)
  ↓
構造警告消息
  ↓
發送消息給系統操作員(QSYSOPR)
  ↓
結束
```

## 5. 參數說明

| 參數名 | 類型 | 長度 | 說明 | 必填 | 預設值 |
|--------|------|------|------|------|--------|
| &HELLO | CHAR | 1 | 錯誤代碼，用於標識違規類型 | 是 | 無 |

## 6. 程序代碼說明

```
PGM        PARM(&HELLO)
```
程序定義，聲明接收一個參數&HELLO。

```
DCL        VAR(&HELLO) TYPE(*CHAR) LEN(1)
```
聲明變數&HELLO為字符型，長度為1個字符。

```
SNDMSG     MSG('ACCESS VIOLATION, ERROR-CODE =' *BCAT &HELLO) TOUSR(QSYSOPR)
```
發送消息給系統操作員(QSYSOPR)，消息內容為"ACCESS VIOLATION, ERROR-CODE ="加上錯誤代碼。
- *BCAT：在兩個字符串之間添加一個空格
- TOUSR(QSYSOPR)：指定消息接收者為系統操作員

```
ENDPGM
```
程序結束。

## 7. 錯誤處理

### 7.1 程序內部錯誤處理
程序本身沒有實現錯誤處理機制，因為它本身就是作為錯誤處理程序被調用的。

### 7.2 可能的錯誤情況
- 參數傳遞錯誤：如果調用時未提供參數，可能導致程序異常
- 消息發送失敗：如果QSYSOPR消息隊列不可用，消息可能無法送達

## 8. 安全考慮

### 8.1 訪問控制
- 程序應只允許系統安全模塊調用
- 程序本身應受到適當的權限保護，防止未授權修改

### 8.2 數據安全
- 錯誤代碼參數應進行適當驗證，防止注入攻擊
- 消息內容不應包含敏感信息，以防信息洩露

## 9. 性能考慮

### 9.1 執行效率
程序邏輯簡單，執行效率高，不會對系統造成明顯負擔。

### 9.2 資源消耗
- CPU使用率：極低
- 內存使用：極低
- I/O操作：僅一次消息發送操作

## 10. 測試要點

### 10.1 單元測試
- 測試不同錯誤代碼的傳遞和顯示
- 測試無參數調用的情況
- 測試非法參數的處理

### 10.2 集成測試
- 與系統安全監控模塊的集成測試
- 與系統日誌記錄程序的集成測試

## 11. 維護建議

### 11.1 日常維護
- 定期檢查程序是否正常運行
- 監控系統操作員消息隊列，確保警告消息能被及時處理

### 11.2 功能擴展建議
- 增加詳細的錯誤代碼說明，使警告消息更加明確
- 增加日誌記錄功能，將違規信息寫入系統日誌
- 增加違規用戶信息的獲取和顯示
- 增加自動響應機制，對特定類型的違規進行自動處理

## 12. 相關文檔

### 12.1 系統文檔
- 西祺企業管理資訊系統安全管理手冊
- IBM AS/400 CL編程指南
- 系統操作員手冊

### 12.2 技術參考
- IBM AS/400 消息處理指南
- 系統安全設計文檔

## 13. 版本歷史

| 版本號 | 更新日期 | 更新內容 | 更新者 |
|--------|----------|----------|--------|
| 1.0 | 79/05/25 | 初始版本 | A1062 JEANNY LIN |

## 14. 附錄

### 14.1 錯誤代碼說明表（建議實現）

| 錯誤代碼 | 說明 |
|----------|------|
| 1 | 未授權的文件訪問 |
| 2 | 未授權的程序執行 |
| 3 | 未授權的系統功能使用 |
| 4 | 密碼錯誤次數超限 |
| 5 | 非法登錄嘗試 |
| 6 | 敏感數據訪問違規 |
| 7 | 系統配置修改嘗試 |
| 8 | 用戶權限越界 |
| 9 | 其他安全違規 |

### 14.2 完整程序代碼

```
     /***************************************************************/
     /*   泛太資訊科技開發股份有限公司－版權所有    TEL:7313250   */
     /*                                                             */
     /*    PROGRAM NAME : HELLO                                     */
     /*    AUTHOR       : A1062   JEANNY LIN                        */
     /*    CREATE DATE  : 79/05/25                                  */
     /*    UPDATE DATE  :                                           */
     /***************************************************************/
             PGM        PARM(&HELLO)
             DCL        VAR(&HELLO) TYPE(*CHAR) LEN(1)
             SNDMSG     MSG('ACCESS VIOLATION, ERROR-CODE =' *BCAT +
                          &HELLO) TOUSR(QSYSOPR)
             ENDPGM
```

## 15. 結語

HELLO程序雖然邏輯簡單，但在西祺企業管理資訊系統的安全框架中扮演著重要角色。它作為訪問違規的處理程序，能夠及時向系統操作員發出警告，有助於維護系統安全。建議在未來的系統升級中，考慮擴展其功能，增加更詳細的錯誤信息和自動響應機制，以提高系統安全管理的效率和有效性。