# 程式功能規格書

## 1. 程式基本資訊

| 項目 | 內容 |
|------|------|
| 程式編號 | WEB012 |
| 程式名稱 | Web 化客戶資料管理系統 |
| 系統分類 | 網路客戶關係管理系統 |
| 開發語言 | RPG IV / HTML / JavaScript |
| 資料庫   | DB2 for IBM i |
| 執行平台 | AS/400 與網頁前端 |
| 版本     | 1.0 |

## 2. 程式概述

WEB012 是一個 Web 化客戶資料管理系統，將傳統 AS/400 綠屏的客戶資料管理功能轉換為網頁介面，提供更直覺、更便捷的客戶資訊管理體驗。該程式負責客戶基本資料的維護、客戶分類管理、聯絡人管理、客戶互動記錄、客戶信用管理等功能，並與其他系統模組整合，實現全方位的客戶關係管理。系統支援多條件查詢、資料匯出、報表生成等功能，協助企業更有效地管理客戶資源。

## 3. 功能需求

### 3.1 基本功能

#### 3.1.1 客戶資料維護功能
- 新增客戶基本資料
- 修改客戶基本資料
- 查詢客戶基本資料
- 停用/啟用客戶資料
- 客戶資料歷史記錄

#### 3.1.2 客戶分類管理
- 客戶分類設定
- 客戶分級管理
- 客戶標籤管理
- 客戶群組管理
- 客戶分類報表

#### 3.1.3 客戶聯絡人管理
- 新增客戶聯絡人
- 修改客戶聯絡人
- 查詢客戶聯絡人
- 設定主要聯絡人
- 聯絡人歷史記錄

#### 3.1.4 客戶互動記錄
- 記錄客戶互動
- 查詢互動歷史
- 互動類型管理
- 互動結果追蹤
- 互動統計分析

#### 3.1.5 客戶信用管理
- 設定客戶信用額度
- 查詢客戶信用狀態
- 信用評級管理
- 信用變更記錄
- 信用風險警示

### 3.2 進階功能

#### 3.2.1 多條件查詢功能
- 複合條件查詢
- 模糊查詢支援
- 查詢條件儲存
- 查詢結果排序
- 查詢結果分頁

#### 3.2.2 資料匯出功能
- 匯出 Excel 格式
- 匯出 PDF 格式
- 匯出 CSV 格式
- 自定義匯出欄位
- 批次資料匯出

#### 3.2.3 報表生成功能
- 客戶基本資料報表
- 客戶分類統計報表
- 客戶互動分析報表
- 客戶信用狀況報表
- 客戶價值分析報表

#### 3.2.4 系統整合功能
- 與銷售系統整合
- 與財務系統整合
- 與服務系統整合
- 與行銷系統整合
- 與電子郵件系統整合

## 4. 資料結構

### 4.1 主要檔案

#### 4.1.1 客戶主檔 (WEBCUSPF)
| 欄位名稱 | 資料類型 | 長度 | 說明 |
|---------|---------|------|------|
| CUST_ID | CHAR | 10 | 客戶編號 (主鍵) |
| CUST_NAME | VARCHAR | 100 | 客戶名稱 |
| CUST_TYPE | CHAR | 2 | 客戶類型代碼 |
| CUST_LEVEL | CHAR | 2 | 客戶等級代碼 |
| TAX_ID | CHAR | 10 | 統一編號 |
| ADDRESS1 | VARCHAR | 100 | 地址1 |
| ADDRESS2 | VARCHAR | 100 | 地址2 |
| CITY | VARCHAR | 50 | 城市 |
| STATE | VARCHAR | 50 | 州/省 |
| POSTAL_CODE | CHAR | 10 | 郵遞區號 |
| COUNTRY | CHAR | 3 | 國家代碼 |
| PHONE | VARCHAR | 20 | 電話 |
| FAX | VARCHAR | 20 | 傳真 |
| EMAIL | VARCHAR | 100 | 電子郵件 |
| WEBSITE | VARCHAR | 100 | 網站 |
| INDUSTRY | CHAR | 5 | 產業代碼 |
| SALES_REP | CHAR | 10 | 業務代表 |
| CREDIT_LIMIT | DECIMAL | 12,2 | 信用額度 |
| CREDIT_RATING | CHAR | 2 | 信用評級 |
| PAYMENT_TERMS | CHAR | 5 | 付款條件 |
| STATUS | CHAR | 1 | 狀態 (A=啟用, D=停用) |
| CREATE_USER | CHAR | 10 | 建立人員 |
| CREATE_DATE | DATE | - | 建立日期 |
| CREATE_TIME | TIME | - | 建立時間 |
| UPDATE_USER | CHAR | 10 | 更新人員 |
| UPDATE_DATE | DATE | - | 更新日期 |
| UPDATE_TIME | TIME | - | 更新時間 |

#### 4.1.2 客戶聯絡人檔 (WEBCONTF)
| 欄位名稱 | 資料類型 | 長度 | 說明 |
|---------|---------|------|------|
| CUST_ID | CHAR | 10 | 客戶編號 (主鍵) |
| CONTACT_ID | CHAR | 10 | 聯絡人編號 (主鍵) |
| CONTACT_NAME | VARCHAR | 100 | 聯絡人姓名 |
| POSITION | VARCHAR | 50 | 職位 |
| DEPARTMENT | VARCHAR | 50 | 部門 |
| PHONE | VARCHAR | 20 | 電話 |
| MOBILE | VARCHAR | 20 | 手機 |
| EMAIL | VARCHAR | 100 | 電子郵件 |
| IS_PRIMARY | CHAR | 1 | 是否主要聯絡人 (Y/N) |
| NOTES | VARCHAR | 500 | 備註 |
| STATUS | CHAR | 1 | 狀態 (A=啟用, D=停用) |
| CREATE_USER | CHAR | 10 | 建立人員 |
| CREATE_DATE | DATE | - | 建立日期 |
| UPDATE_USER | CHAR | 10 | 更新人員 |
| UPDATE_DATE | DATE | - | 更新日期 |

#### 4.1.3 客戶互動記錄檔 (WEBINTPF)
| 欄位名稱 | 資料類型 | 長度 | 說明 |
|---------|---------|------|------|
| INTERACTION_ID | CHAR | 15 | 互動記錄編號 (主鍵) |
| CUST_ID | CHAR | 10 | 客戶編號 |
| CONTACT_ID | CHAR | 10 | 聯絡人編號 |
| INT_DATE | DATE | - | 互動日期 |
| INT_TIME | TIME | - | 互動時間 |
| INT_TYPE | CHAR | 5 | 互動類型代碼 |
| INT_METHOD | CHAR | 5 | 互動方式代碼 |
| INT_SUBJECT | VARCHAR | 100 | 互動主題 |
| INT_CONTENT | VARCHAR | 2000 | 互動內容 |
| INT_RESULT | CHAR | 5 | 互動結果代碼 |
| FOLLOW_UP_DATE | DATE | - | 後續追蹤日期 |
| FOLLOW_UP_TYPE | CHAR | 5 | 後續追蹤類型 |
| OPERATOR_ID | CHAR | 10 | 操作人員 |
| NOTES | VARCHAR | 500 | 備註 |
| CREATE_USER | CHAR | 10 | 建立人員 |
| CREATE_DATE | DATE | - | 建立日期 |
| UPDATE_USER | CHAR | 10 | 更新人員 |
| UPDATE_DATE | DATE | - | 更新日期 |

#### 4.1.4 客戶信用記錄檔 (WEBCREPF)
| 欄位名稱 | 資料類型 | 長度 | 說明 |
|---------|---------|------|------|
| CUST_ID | CHAR | 10 | 客戶編號 (主鍵) |
| CREDIT_SEQ | INTEGER | - | 信用記錄序號 (主鍵) |
| CREDIT_DATE | DATE | - | 信用變更日期 |
| PREV_LIMIT | DECIMAL | 12,2 | 變更前信用額度 |
| NEW_LIMIT | DECIMAL | 12,2 | 變更後信用額度 |
| PREV_RATING | CHAR | 2 | 變更前信用評級 |
| NEW_RATING | CHAR | 2 | 變更後信用評級 |
| CHANGE_REASON | VARCHAR | 200 | 變更原因 |
| APPROVER_ID | CHAR | 10 | 核准人員 |
| NOTES | VARCHAR | 500 | 備註 |
| CREATE_USER | CHAR | 10 | 建立人員 |
| CREATE_DATE | DATE | - | 建立日期 |

#### 4.1.5 客戶標籤檔 (WEBTAGPF)
| 欄位名稱 | 資料類型 | 長度 | 說明 |
|---------|---------|------|------|
| CUST_ID | CHAR | 10 | 客戶編號 (主鍵) |
| TAG_ID | CHAR | 10 | 標籤代碼 (主鍵) |
| ASSIGN_DATE | DATE | - | 指派日期 |
| ASSIGN_USER | CHAR | 10 | 指派人員 |
| NOTES | VARCHAR | 200 | 備註 |

### 4.2 參考檔案

#### 4.2.1 客戶類型檔 (MDCUSTCF)
#### 4.2.2 客戶等級檔 (MDCUSTLF)
#### 4.2.3 產業代碼檔 (MDINDUF)
#### 4.2.4 標籤主檔 (MDTAGF)
#### 4.2.5 互動類型檔 (MDINTTF)

## 5. 處理流程

### 5.1 客戶資料維護流程
1. 使用者登入系統
2. 使用者選擇客戶資料維護功能
3. 系統顯示客戶查詢畫面
4. 使用者輸入查詢條件
5. 系統顯示符合條件的客戶列表
6. 使用者選擇新增、修改或查看客戶資料
7. 系統顯示相應的表單
8. 使用者輸入或修改資料
9. 系統驗證資料有效性
10. 系統儲存資料並記錄變更

### 5.2 客戶聯絡人管理流程
1. 使用者選擇特定客戶
2. 使用者選擇聯絡人管理功能
3. 系統顯示該客戶的聯絡人列表
4. 使用者選擇新增、修改或查看聯絡人
5. 系統顯示相應的表單
6. 使用者輸入或修改聯絡人資料
7. 系統驗證資料有效性
8. 系統儲存資料並記錄變更
9. 如設為主要聯絡人，系統更新其他聯絡人狀態

### 5.3 客戶互動記錄流程
1. 使用者選擇特定客戶
2. 使用者選擇互動記錄功能
3. 系統顯示該客戶的互動記錄列表
4. 使用者選擇新增互動記錄
5. 系統顯示互動記錄表單
6. 使用者輸入互動詳情
7. 系統驗證資料有效性
8. 系統儲存互動記錄
9. 如需後續追蹤，系統設定提醒

### 5.4 客戶信用管理流程
1. 使用者選擇特定客戶
2. 使用者選擇信用管理功能
3. 系統顯示該客戶的信用資訊
4. 使用者選擇修改信用資訊
5. 系統顯示信用變更表單
6. 使用者輸入新的信用資訊和變更原因
7. 系統驗證使用者權限
8. 系統儲存信用變更記錄
9. 系統更新客戶主檔的信用資訊

## 6. 使用者介面

### 6.1 網頁前端介面

#### 6.1.1 客戶查詢頁面
- 查詢條件設定區域
- 快速查詢按鈕
- 查詢結果顯示區域
- 分頁控制
- 排序與篩選控制
- 資料匯出按鈕
- 新增客戶按鈕

#### 6.1.2 客戶資料維護頁面
- 客戶基本資料區域
- 聯絡人資訊摘要
- 互動記錄摘要
- 信用資訊摘要
- 標籤顯示區域
- 資料編輯按鈕
- 功能選單區域

#### 6.1.3 聯絡人管理頁面
- 聯絡人列表
- 聯絡人詳細資訊
- 聯絡人新增/編輯表單
- 主要聯絡人設定
- 聯絡人狀態控制
- 聯絡人歷史記錄

#### 6.1.4 互動記錄頁面
- 互動記錄列表
- 互動記錄篩選
- 互動記錄詳細資訊
- 互動記錄新增表單
- 後續追蹤設定
- 互動統計圖表

#### 6.1.5 信用管理頁面
- 信用資訊顯示
- 信用變更歷史
- 信用變更表單
- 信用風險指標
- 應收帳款摘要
- 付款歷史摘要

### 6.2 報表介面

#### 6.2.1 客戶基本資料報表
- 報表參數設定
- 報表預覽
- 報表匯出選項
- 報表列印選項
- 報表儲存選項

#### 6.2.2 客戶分類統計報表
- 統計條件設定
- 統計圖表顯示
- 統計數據表格
- 資料鑽取功能
- 報表匯出選項

#### 6.2.3 客戶互動分析報表
- 分析條件設定
- 互動趨勢圖表
- 互動類型分布
- 互動結果分析
- 報表匯出選項

## 7. 系統整合

### 7.1 與銷售系統整合
- 提供客戶資料給銷售系統
- 接收銷售訂單資訊
- 更新客戶購買歷史
- 支援銷售機會管理
- 提供客戶價值分析

### 7.2 與財務系統整合
- 提供客戶信用資訊給財務系統
- 接收應收帳款資訊
- 更新客戶付款記錄
- 支援信用風險評估
- 提供財務分析資料

### 7.3 與服務系統整合
- 提供客戶資料給服務系統
- 接收服務請求資訊
- 更新客戶服務歷史
- 支援服務滿意度分析
- 提供客戶服務需求分析

### 7.4 與行銷系統整合
- 提供客戶分類資料給行銷系統
- 接收行銷活動參與資訊
- 更新客戶行銷互動記錄
- 支援目標客群分析
- 提供行銷效果評估

## 8. 安全性需求

### 8.1 資料安全
- 客戶資料存取控制
- 敏感資料加密
- 資料傳輸加密
- 定期資料備份
- 資料存取稽核記錄

### 8.2 使用者認證與授權
- 使用者身份驗證
- 角色基礎存取控制
- 功能權限管理
- 資料權限管理
- 操作權限管理

### 8.3 系統安全
- 網路安全防護
- 系統漏洞定期檢測
- 安全更新管理
- 防毒與惡意軟體防護
- 系統安全稽核

## 9. 效能需求

### 9.1 回應時間
- 基本查詢回應時間不超過 2 秒
- 複雜查詢回應時間不超過 5 秒
- 資料儲存回應時間不超過 3 秒
- 報表生成時間不超過 10 秒
- 頁面載入時間不超過 3 秒

### 9.2 處理能力
- 支援同時 50 位使用者在線
- 每日處理 5,000 次查詢請求
- 支援 100,000 筆客戶記錄
- 支援 500,000 筆互動記錄
- 系統可用性達 99.5%

### 9.3 擴展性
- 支援水平擴展
- 模組化設計
- 可配置的處理流程
- 彈性的資料結構
- 支援未來功能擴展

## 10. 測試需求

### 10.1 功能測試
- 客戶資料維護功能測試
- 客戶聯絡人管理測試
- 客戶互動記錄功能測試
- 客戶信用管理功能測試
- 報表生成功能測試

### 10.2 效能測試
- 系統負載測試
- 查詢效能測試
- 資料庫效能測試
- 並發使用者測試
- 長時間運行穩定性測試

### 10.3 安全測試
- 使用者認證測試
- 權限控制測試
- 資料存取控制測試
- 資料加密測試
- 安全漏洞掃描

### 10.4 整合測試
- 與銷售系統整合測試
- 與財務系統整合測試
- 與服務系統整合測試
- 與行銷系統整合測試
- 與電子郵件系統整合測試

## 11. 實施計劃

### 11.1 開發階段
1. 需求分析與設計 (2週)
2. 資料庫設計與建置 (1週)
3. 後端程式開發 (3週)
4. 前端介面開發 (3週)
5. 系統整合 (2週)
6. 測試與除錯 (2週)
7. 文件編寫 (1週)

### 11.2 測試階段
1. 單元測試 (1週)
2. 整合測試 (1週)
3. 系統測試 (1週)
4. 使用者接受度測試 (1週)
5. 效能測試 (1週)
6. 安全測試 (1週)

### 11.3 部署階段
1. 環境準備 (1週)
2. 系統部署 (1週)
3. 資料遷移 (1週)
4. 使用者培訓 (1週)
5. 上線準備 (1週)
6. 正式上線 (1天)
7. 上線後支援 (4週)

## 12. 維護計劃

### 12.1 日常維護
- 系統監控與警報
- 資料庫維護與優化
- 系統效能調整
- 安全更新與修補
- 問題追蹤與解決

### 12.2 定期維護
- 每週系統備份
- 每月系統效能評估
- 每季安全稽核
- 每半年系統升級評估
- 每年系統全面檢修

### 12.3 問題處理流程
1. 問題報告接收
2. 問題分類與優先級評估
3. 問題分派與處理
4. 解決方案測試與驗證
5. 解決方案部署
6. 問題解決確認與記錄

## 13. 文件需求

### 13.1 技術文件
- 系統架構文件
- 資料庫設計文件
- 程式設計文件
- API 文件
- 測試文件

### 13.2 使用者文件
- 使用者手冊
- 管理員手冊
- 操作指南
- 常見問題解答
- 故障排除指南

### 13.3 培訓文件
- 使用者培訓教材
- 管理員培訓教材
- 操作流程指南
- 系統功能介紹
- 實際操作案例

## 14. 附錄

### 14.1 術語表
- **WEB012**: Web 化客戶資料管理系統程式編號
- **Web 化**: 將傳統 AS/400 綠屏介面轉換為網頁介面的過程
- **客戶分類**: 根據特定標準對客戶進行分組的過程
- **客戶互動**: 與客戶的任何形式的溝通或接觸
- **信用評級**: 評估客戶信用風險的等級分類

### 14.2 參考資料
- AS/400 系統技術文件
- RPG IV 程式設計指南
- Web 應用程式開發標準
- 客戶關係管理最佳實踐
- 系統整合設計指南

### 14.3 變更歷史
| 版本 | 日期 | 變更說明 | 變更人 |
|------|------|----------|--------|
| 0.1 | 2023/01/10 | 初稿 | 系統分析師 |
| 0.2 | 2023/01/25 | 新增系統整合需求 | 系統架構師 |
| 0.3 | 2023/02/10 | 修訂效能需求 | 效能工程師 |
| 0.4 | 2023/02/25 | 完善安全需求 | 安全專家 |
| 1.0 | 2023/03/10 | 正式版本 | 專案經理 |
